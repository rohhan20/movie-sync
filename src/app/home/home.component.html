<div class="home-container">
  <div *ngIf="currentUser$ | async as user; else guestView" class="home-content">
    <div class="welcome-section">
      <h1>Welcome, {{ user.displayName }}!</h1>
      <p class="subtitle">Ready for a movie night? Create a new session or join an existing one.</p>
    </div>

    <div class="actions-grid">
      <mat-card class="action-card">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>add_circle</mat-icon>
            Create Session
          </mat-card-title>
          <mat-card-subtitle>Start a new movie night session</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p>Create a session and invite your friends to join. The app will find movies that no one in your group has watched!</p>
        </mat-card-content>
        <mat-card-actions>
          <button mat-raised-button color="primary" (click)="createSession()">
            <mat-icon>add</mat-icon>
            Create Session
          </button>
        </mat-card-actions>
      </mat-card>

      <mat-card class="action-card">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>group_add</mat-icon>
            Join Session
          </mat-card-title>
          <mat-card-subtitle>Join an existing session</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field appearance="outline" style="width: 100%;">
            <mat-label>Enter Session Code</mat-label>
            <input matInput [(ngModel)]="joinCode" placeholder="e.g., abc123" (keyup.enter)="joinSession()">
            <mat-icon matSuffix>vpn_key</mat-icon>
          </mat-form-field>
        </mat-card-content>
        <mat-card-actions>
          <button mat-raised-button color="accent" (click)="joinSession()" [disabled]="!joinCode.trim()">
            <mat-icon>login</mat-icon>
            Join Session
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>

  <ng-template #guestView>
    <div class="guest-view">
      <h1>Welcome to MovieSync!</h1>
      <p class="subtitle">The easiest way to decide on a movie for your movie night</p>
      <div class="features">
        <mat-card>
          <mat-card-content>
            <mat-icon>movie</mat-icon>
            <h3>Find Movies</h3>
            <p>Search and add movies to your watched list</p>
          </mat-card-content>
        </mat-card>
        <mat-card>
          <mat-card-content>
            <mat-icon>group</mat-icon>
            <h3>Create Sessions</h3>
            <p>Start a session and invite friends</p>
          </mat-card-content>
        </mat-card>
        <mat-card>
          <mat-card-content>
            <mat-icon>recommend</mat-icon>
            <h3>Get Recommendations</h3>
            <p>Get personalized recommendations based on your group's watched lists</p>
          </mat-card-content>
        </mat-card>
      </div>
      <div class="auth-actions">
        <button mat-raised-button color="primary" routerLink="/signup">Get Started</button>
        <button mat-button routerLink="/login">Already have an account? Login</button>
      </div>
    </div>
  </ng-template>

  <div class="search-section" *ngIf="currentUser$ | async">
    <app-search></app-search>
  </div>
</div>
